!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tslib"),require("@angular/common/http"),require("@angular/core"),require("@angular/platform-browser"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("@nguniversal/common",["exports","tslib","@angular/common/http","@angular/core","@angular/platform-browser","rxjs","rxjs/operators","@angular/common"],t):t(((e=e||self).nguniversal=e.nguniversal||{},e.nguniversal.common={}),e.tslib,e.ng.common.http,e.ng.core,e.ng.platformBrowser,e.rxjs,e.rxjs.operators,e.ng.common)}(this,function(e,t,r,n,a,o,s,i){"use strict";function u(e){var r,n,a={};try{for(var o=t.__values(e.keys()),s=o.next();!s.done;s=o.next()){var i=s.value;a[i]=e.getAll(i)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}var c=function(){function e(e,t){var r=this;this.transferState=t,this.isCacheActive=!0,e.isStable.pipe(s.filter(function(e){return e}),s.take(1)).toPromise().then(function(){r.isCacheActive=!1})}return e.prototype.invalidateCacheEntry=function(e){var t=this;Object.keys(this.transferState.store).forEach(function(r){return r.includes(e)?t.transferState.remove(a.makeStateKey(r)):null})},e.prototype.makeCacheKey=function(e,t,r){var n=r.keys().sort().map(function(e){return e+"="+r.get(e)}).join("&");return a.makeStateKey(("GET"===e?"G.":"H.")+t+"?"+n)},e.prototype.intercept=function(e,t){var n=this;if("GET"!==e.method&&"HEAD"!==e.method&&(this.isCacheActive=!1,this.invalidateCacheEntry(e.url)),!this.isCacheActive)return t.handle(e);var a=this.makeCacheKey(e.method,e.url,e.params);if(this.transferState.hasKey(a)){var i=this.transferState.get(a,{});return o.of(new r.HttpResponse({body:i.body,headers:new r.HttpHeaders(i.headers),status:i.status,statusText:i.statusText,url:i.url}))}return t.handle(e).pipe(s.tap(function(e){e instanceof r.HttpResponse&&n.transferState.set(a,{body:e.body,headers:u(e.headers),status:e.status,statusText:e.statusText,url:e.url})}))},t.__decorate([n.Injectable(),t.__metadata("design:paramtypes",[n.ApplicationRef,a.TransferState])],e)}(),l=function(){return t.__decorate([n.NgModule({imports:[a.BrowserTransferStateModule],providers:[c,{provide:r.HTTP_INTERCEPTORS,useExisting:c,multi:!0}]})],function e(){})}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function f(e){return function(){return new Promise(function(t,r){var n=function(){e.removeEventListener("DOMContentLoaded",n),t()};"complete"===e.readyState||"interactive"===e.readyState?t():e.addEventListener("DOMContentLoaded",n)})}}var d=function(){return t.__decorate([n.NgModule({providers:[{provide:n.APP_INITIALIZER,multi:!0,useFactory:f,deps:[i.DOCUMENT]}]})],function e(){})}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */e.ɵnguniversal_modules_common_common_a=f,e.TransferHttpCacheModule=l,e.StateTransferInitializerModule=d,e.ɵTransferHttpCacheInterceptor=c,Object.defineProperty(e,"__esModule",{value:!0})});