{"version":3,"file":"ngx-lite-input-star-rating.js.map","sources":["ng://@ngx-lite/input-star-rating/ngx-input-star-rating.component.ts","ng://@ngx-lite/input-star-rating/ngx-input-star-rating.module.ts"],"sourcesContent":["import {\n  forwardRef,\n  Component,\n  Input,\n  OnChanges,\n  OnInit,\n  SimpleChanges,\n  ViewEncapsulation,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\nconst starIcons = {\n  outline: 'outline',\n  full: 'full',\n  half: 'half'\n};\n\n@Component({\n  selector: 'ngx-input-star-rating',\n  templateUrl: './ngx-input-star-rating.component.html',\n  styleUrls: ['./ngx-input-star-rating.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NgxInputStarRatingComponent),\n      multi: true\n    }\n  ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class NgxInputStarRatingComponent\n  implements ControlValueAccessor, OnInit, OnChanges {\n  get value() {\n    return this._value;\n  }\n\n  set value(val) {\n    this._value = val;\n    this.onChange(val);\n    this.valueUpdate(this._value);\n    this.onTouched();\n  }\n\n  @Input('value') _value = 0;\n  @Input() count = 5;\n  @Input() disabled = false;\n\n  readonly starIcons = starIcons;\n\n  buttons: { active: boolean; icon: string }[] = [];\n\n  // tslint:disable-next-line:no-empty\n  onChange = (_value: number) => {};\n\n  // tslint:disable-next-line:no-empty\n  onTouched = () => {};\n\n  registerOnChange(fn: (value: number) => void) {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => void) {\n    this.onTouched = fn;\n  }\n\n  writeValue(value: number) {\n    if (value !== this.value) {\n      this.value = value;\n    }\n  }\n\n  ngOnInit() {\n    for (let i = 0; i < this.count; i++) {\n      this.buttons.push({ active: false, icon: starIcons.outline });\n    }\n\n    this.valueUpdate(this.value);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.value && changes.value.currentValue) {\n      this.valueUpdate(changes.value.currentValue);\n    }\n  }\n\n  rate(index: number) {\n    this.buttons.forEach((btn, i) => {\n      if (i <= index) {\n        btn.icon = starIcons.full;\n      } else {\n        btn.icon = starIcons.outline;\n      }\n    });\n\n    const total = this.buttons.reduce((prev, next) => {\n      if (next.icon === starIcons.full) {\n        return prev + 1;\n      } else {\n        return prev;\n      }\n    }, 0);\n\n    this.value = total;\n  }\n\n  mouseEnter(index: number) {\n    this.buttons.forEach((btn, i) => {\n      if (i <= index) {\n        btn.active = true;\n      } else {\n        btn.active = false;\n      }\n    });\n  }\n\n  mouseLeave() {\n    this.buttons.forEach(i => (i.active = false));\n  }\n\n  private valueUpdate(value: number) {\n    this.buttons.forEach((btn, i) => {\n      const starValue = i + 1;\n\n      if (value >= starValue) {\n        btn.icon = starIcons.full;\n      }\n\n      if (value >= starValue - 0.5 && value < starValue) {\n        btn.icon = starIcons.half;\n      }\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NgxInputStarRatingComponent } from './ngx-input-star-rating.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [NgxInputStarRatingComponent],\n  exports: [NgxInputStarRatingComponent]\n})\nexport class NgxInputStarRatingModule {}\n"],"names":[],"mappings":"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"}
